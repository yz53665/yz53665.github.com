---
layout: post
title: 博客搭建记录
categories:
- blog
---

<div id="outline-container-org523a6df" class="outline-2">
<h2 id="org523a6df">安装 Jekyll</h2>
<div class="outline-text-2" id="text-org523a6df">
</div>
<div id="outline-container-org4268986" class="outline-3">
<h3 id="org4268986">安装 Ruby</h3>
<div class="outline-text-3" id="text-org4268986">
<div class="org-src-container">
<pre class="src src-bash">brew reinstall ruby
</pre>
</div>
<p>
Tips：mac 下的 ruby 已经包含了 RubyGems
</p>
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #cc99cc;">echo</span> <span style="color: #66cccc;">'export PATH="/usr/local/opt/ruby/bin:$PATH"'</span> &gt;&gt; ~/.zshrc
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc427511" class="outline-3">
<h3 id="orgc427511">重新安装 Xcode command Line Tool</h3>
<div class="outline-text-3" id="text-orgc427511">
<div class="org-src-container">
<pre class="src src-bash">sudo gem update --system
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbffaaf5" class="outline-3">
<h3 id="orgbffaaf5">安装 Jekyll</h3>
<div class="outline-text-3" id="text-orgbffaaf5">
<div class="org-src-container">
<pre class="src src-bash">sudo gem install jekyll --pre
</pre>
</div>
<p>
速度会比较慢，请耐心等待
</p>
</div>
</div>
</div>

<div id="outline-container-orgda836ff" class="outline-2">
<h2 id="orgda836ff">使用github + Jekyll创建网站</h2>
<div class="outline-text-2" id="text-orgda836ff">
<div class="org-src-container">
<pre class="src src-bash">jekyll new JekyllBlog
</pre>
</div>
<p>
该指令会在当前目录下创建一个叫 <b>JekyllBlog</b> 的文件夹，里面会包含网站需要的基本
文件。
</p>

<p>
进入创建的文件夹下，打开Gemfile，将里面 <code>gem "jekyll"</code> 开头的行注释掉，将这一
行改为：
</p>
<div class="org-src-container">
<pre class="src src-bash">gem <span style="color: #66cccc;">"github-pages"</span>, <span style="color: #66cccc;">"~&gt; GITHUB-PAGES-VERSION"</span>, group: :jekyll_plugins
</pre>
</div>
<p>
其中 <b>GITHUB-PAGES-VERSION</b> 替换成这个<a href="https://pages.github.com/versions/">网站</a>中 <b>github-pages</b> 的最新版本号。
保存后在命令行输入 <code>bundle install</code> 更新插件。
</p>
</div>
</div>

<div id="outline-container-org628dba7" class="outline-2">
<h2 id="org628dba7">导出注意事项</h2>
<div class="outline-text-2" id="text-org628dba7">
</div>
<div id="outline-container-orgd33ab67" class="outline-3">
<h3 id="orgd33ab67">文件头</h3>
<div class="outline-text-3" id="text-orgd33ab67">
<p>
需要在文件头加上如下内容：
</p>
<div class="org-src-container">
<pre class="src src-org"><span style="color: #999999; background-color: #2d2d2d; font-style: italic;">#+BEGIN_EXPORT html</span>
<span style="color: #cb4b16; background-color: #333333333333;">---</span>
<span style="color: #cb4b16; background-color: #333333333333;">layout: default</span>
<span style="color: #cb4b16; background-color: #333333333333;">title: Benighted on the Ben.</span>
<span style="color: #cb4b16; background-color: #333333333333;">excerpt: An unplanned bivouac on Ben Nevis.</span>
<span style="color: #cb4b16; background-color: #333333333333;">---</span>
<span style="color: #999999; background-color: #2d2d2d; font-style: italic;">#+END_EXPORT</span>
<span style="color: #999999; font-style: italic;">#+OPTIONS: toc:nil</span>
</pre>
</div>
<p>
<code>#+BEGIN_EXPORT html</code> 保证导出成 html 时包含的内容可以被原封不动的转换到 html 文件中，
<code>---</code> 中的内容与 jekyll 页面设置有关, <code>#+OPTIONS: toc:nil</code> 设置生成的html文件不包含目录,防止
覆盖jekyll设置.
</p>
</div>
</div>

<div id="outline-container-org4be5639" class="outline-3">
<h3 id="org4be5639">自动化操作</h3>
<div class="outline-text-3" id="text-org4be5639">
<p>
emacs 非常贴心的提供了两个 hook，帮助在导出后完成后自动进行下一步处理：
</p>
<div class="org-src-container">
<pre class="src src-elisp">org-export-html-final-hook      <span style="color: #999999; font-style: italic;">;;</span><span style="color: #999999; font-style: italic;">always</span>
org-publish-after-export-hook   <span style="color: #999999; font-style: italic;">;;</span><span style="color: #999999; font-style: italic;">when going through org-publish</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9ec0caf" class="outline-2">
<h2 id="org9ec0caf">配置</h2>
<div class="outline-text-2" id="text-org9ec0caf">
<p>
在push到github之前需要在 <code>_conf.yml</code> 中加入以下内容:
</p>
<div class="org-src-container">
<pre class="src src-jekyll">  domain: my-site.github.io       # if you want to force HTTPS, specify the domain without the http at the start, e.g. example.com
url: https://my-site.github.io  # the base hostname and protocol for your site, e.g. http://example.com
baseurl: /REPOSITORY-NAME/      # place folder name if the site is served in a subfolder
</pre>
</div>
</div>
</div>
